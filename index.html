<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>카운트다운</title>
  <style>
    /* 기본 리셋 & 박스 사이징 */
    *, *::before, *::after { box-sizing: border-box; }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: #000;
      color: #fff;
      font-family: "Pretendard", "Noto Sans KR", sans-serif;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      overflow: hidden;
      padding: 0 16px; /* 모바일에서 양옆 여백 확보 */
    }

    h1 {
      font-size: 2rem;
      margin: 0 0 16px 0;
      letter-spacing: 2px;
      line-height: 1.2;
      word-break: keep-all;
    }

    #timer {
      font-size: 2.5rem;
      font-weight: 700;
      line-height: 1.2;
      margin-bottom: 8px;
      word-break: keep-all;
    }

    /* 작은 화면 (모바일)용 강제 스타일 */
    @media (max-width: 600px) {
      h1 { font-size: 1.25rem !important; }   /* !important로 우선 적용 보장 */
      #timer { font-size: 1.9rem !important; }
    }

    /* 매우 작은 화면(예: 좁은 모바일) */
    @media (max-width: 360px) {
      h1 { font-size: 1.05rem !important; }
      #timer { font-size: 1.5rem !important; }
    }

    /* 폭죽(파티클) 스타일 */
    .firework {
      position: absolute;
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      pointer-events: none;
      animation: explode 1s ease-out forwards;
      will-change: transform, opacity;
    }

    @keyframes explode {
      0% { opacity: 1; transform: translate(0,0) scale(1); }
      100% { opacity: 0; transform: translate(var(--x), var(--y)) scale(0); }
    }

    /* (디버그용) 적용 확인용 작은 안내 텍스트 */
    #debug {
      position: fixed;
      bottom: 8px;
      left: 8px;
      font-size: 11px;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <!-- 제목은 수동 입력으로 유지 -->
  <h1>🎉 ???까지 남은 시간 🎉</h1>
  <div id="timer" aria-live="polite"></div>
  <div id="debug">디버그: script 버전 1.2</div>

  <script>
    // -----------------------
    // 설정
    // -----------------------
    const targetDate = new Date("2025-11-19T00:00:00");
    const timerEl = document.getElementById("timer");

    // -----------------------
    // 반응형 폭죽 파라미터 (화면 크기에 따라 자동 조절)
    // -----------------------
    function getFireworkConfig() {
      const w = window.innerWidth;
      // 작은 화면일수록 파티클 수와 반경을 줄임
      if (w <= 360) return {count: 20, minR: 30, maxR: 90};
      if (w <= 600) return {count: 30, minR: 40, maxR: 120};
      if (w <= 900) return {count: 40, minR: 60, maxR: 180};
      return {count: 50, minR: 80, maxR: 250};
    }

    // -----------------------
    // 타이머 업데이트
    // -----------------------
    function updateTimer() {
      const now = new Date();
      const diff = targetDate - now;

      if (diff <= 0) {
        timerEl.innerText = "🎊 이벤트가 시작되었습니다! 🎊";
        launchFireworks();
        clearInterval(intervalRef);
        return;
      }

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      const seconds = Math.floor((diff / 1000) % 60);

      timerEl.innerText = `${days}일 ${hours}시간 ${minutes}분 ${seconds}초`;
    }

    // -----------------------
    // 폭죽 실행
    // -----------------------
    function launchFireworks() {
      const cfg = getFireworkConfig();
      for (let i = 0; i < cfg.count; i++) {
        const firework = document.createElement("div");
        firework.className = "firework";
        document.body.appendChild(firework);

        // 무작위 각도 및 반경 (viewport 기준)
        const angle = Math.random() * Math.PI * 2;
        const radius = Math.random() * (cfg.maxR - cfg.minR) + cfg.minR;

        // 화면 중앙 기준으로 퍼짐 (세로 중앙 보정)
        const x = Math.cos(angle) * radius + "px";
        const y = Math.sin(angle) * radius + "px";

        firework.style.setProperty("--x", x);
        firework.style.setProperty("--y", y);

        // 중앙에서 시작하게 설정
        firework.style.left = "50%";
        firework.style.top = "45%";
        firework.style.transform = "translate(-50%, -50%)";

        // 색상 랜덤
        firework.style.background = `hsl(${Math.floor(Math.random()*360)}, 100%, 70%)`;

        // 자동 제거 (애니메이션 길이 + 여유)
        setTimeout(() => {
          try { firework.remove(); } catch(e) {}
        }, 1100);
      }
    }

    // -----------------------
    // 초기 실행 & 인터벌
    // -----------------------
    let intervalRef = setInterval(updateTimer, 1000);
    updateTimer();

    // -----------------------
    // 디버그: 콘솔에 적용 상태 출력
    // -----------------------
    console.log("카운트다운 스크립트 로드됨. targetDate:", targetDate.toString());
    console.log("화면 크기:", window.innerWidth, "x", window.innerHeight);
    console.log("firework config:", getFireworkConfig());

    // -----------------------
    // 창 크기 변경 시 디버그/설정 갱신
    // -----------------------
    window.addEventListener("resize", () => {
      document.getElementById("debug").innerText = `디버그: script 버전 1.2 — ${window.innerWidth}x${window.innerHeight}`;
    });
  </script>
</body>
</html>






